"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5789],{25789:(ee,v,r)=>{r.r(v),r.d(v,{default:()=>W});var F=r(10467),h=r(60177),e=r(54438),_=r(88834),x=r(75351),d=r(96695),m=r(2042),l=r(9159),T=r(31849),g=r(59042),U=r(89417),A=r(99213),u=r(45794),b=r(3366),C=r(46601);let y=(()=>{class a{constructor(){this.activeUsers=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isNotFound=(0,e.vPA)(!1),this.totalUser=(0,e.vPA)(0),this._toastService=(0,e.WQX)(u.tw),this._apiService=(0,e.WQX)(b.G)}fetchData(){this.isLoading.set(!0),this._apiService.get("/api/mikrotik/get-active-micasa",!0).then(t=>{this.isLoading.set(!1),this.isNotFound.set(!1),this.activeUsers.set(t.active_users??[]),this.totalUser.set(t.active_users.length),null!==t.active_users&&0!=t.active_users.length||this.isNotFound.set(!0)}).catch(t=>{this.isLoading.set(!1),this.isNotFound.set(!0),this._toastService.error("Failed to fetch data","Error")})}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const S=()=>[5,10,20];function k(a,i){1&a&&(e.j41(0,"div",24),e.nrm(1,"div",25)(2,"div",25)(3,"div",25)(4,"div",25)(5,"div",25)(6,"div",25)(7,"div",26),e.k0s())}function w(a,i){1&a&&(e.j41(0,"div")(1,"div",27),e.nrm(2,"img",28),e.j41(3,"h1",29),e.EFF(4,"Data Not Found"),e.k0s()()())}function D(a,i){1&a&&(e.j41(0,"mat-header-cell",44),e.EFF(1," User "),e.k0s())}function j(a,i){1&a&&(e.j41(0,"div",24),e.nrm(1,"div",25),e.k0s())}function B(a,i){if(1&a&&(e.j41(0,"mat-cell",45),e.EFF(1),e.k0s()),2&a){const t=i.$implicit;e.R7$(),e.SpI(" ",t.user," ")}}function E(a,i){1&a&&(e.j41(0,"mat-header-cell",46),e.EFF(1," Ip Address "),e.k0s())}function $(a,i){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=i.$implicit;e.R7$(),e.SpI(" ",t.address," ")}}function N(a,i){1&a&&(e.j41(0,"mat-header-cell",46),e.EFF(1," MAC Address "),e.k0s())}function R(a,i){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=i.$implicit;e.R7$(),e.SpI(" ",t["mac-address"]," ")}}function G(a,i){1&a&&(e.j41(0,"mat-header-cell",46),e.EFF(1," Uptime "),e.k0s())}function I(a,i){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=i.$implicit;e.R7$(),e.SpI(" ",t.uptime," ")}}function L(a,i){1&a&&(e.j41(0,"mat-header-cell",46),e.EFF(1," Download "),e.k0s())}function V(a,i){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=i.$implicit,s=e.XpG(2);e.R7$(),e.SpI(" ",s.formatBytesAuto(t["bytes-in"]),"")}}function M(a,i){1&a&&(e.j41(0,"mat-header-cell",46),e.EFF(1," Upload "),e.k0s())}function X(a,i){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=i.$implicit,s=e.XpG(2);e.R7$(),e.SpI("",s.formatBytesAuto(t["bytes-out"])," ")}}function Y(a,i){1&a&&(e.j41(0,"mat-header-cell",46),e.EFF(1," Action "),e.k0s())}function H(a,i){if(1&a){const t=e.RV6();e.j41(0,"mat-cell")(1,"button",47),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.disconectedUser(o.user,o.id))}),e.EFF(2,"Disconected"),e.k0s()()}}function P(a,i){1&a&&e.nrm(0,"mat-header-row")}function Q(a,i){1&a&&e.nrm(0,"mat-row")}function K(a,i){if(1&a&&(e.j41(0,"mat-table",30,2)(2,"div"),e.qex(3,31),e.DNE(4,D,2,0,"mat-header-cell",32)(5,j,2,0,"div",19)(6,B,2,1,"mat-cell",33),e.bVm(),e.qex(7,34),e.DNE(8,E,2,0,"mat-header-cell",35)(9,$,2,1,"mat-cell",36),e.bVm(),e.qex(10,37),e.DNE(11,N,2,0,"mat-header-cell",35)(12,R,2,1,"mat-cell",36),e.bVm(),e.qex(13,38),e.DNE(14,G,2,0,"mat-header-cell",35)(15,I,2,1,"mat-cell",36),e.bVm(),e.qex(16,39),e.DNE(17,L,2,0,"mat-header-cell",35)(18,V,2,1,"mat-cell",36),e.bVm(),e.qex(19,40),e.DNE(20,M,2,0,"mat-header-cell",35)(21,X,2,1,"mat-cell",36),e.bVm(),e.qex(22,41),e.DNE(23,Y,2,0,"mat-header-cell",35)(24,H,3,0,"mat-cell",36),e.bVm(),e.DNE(25,P,1,0,"mat-header-row",42)(26,Q,1,0,"mat-row",43),e.k0s()()),2&a){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(5),e.Y8G("ngIf",t.isLoading),e.R7$(20),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}let z=(()=>{class a{constructor(t,s,o,n,c){this._apiService=t,this.fuseConfirmationService=s,this._tableActiveUsersService=o,this.cdr=n,this._toast=c,this.displayedColumns=["user","address","mac_address","uptime","bytes-in","bytes-out","action"],this.dataSource=new l.I6,this.toast=(0,e.WQX)(u.tw),(0,e.QZP)(()=>{this.dataSource.data=this._tableActiveUsersService.activeUsers()})}get isLoading(){return this._tableActiveUsersService.isLoading()}set setIsLoading(t){this._tableActiveUsersService.isLoading.set(t)}set setIsNotDataFound(t){this._tableActiveUsersService.isNotFound.set(t)}get isNotDataFound(){return this._tableActiveUsersService.isNotFound()}get totalUser(){return this._tableActiveUsersService.totalUser()}ngOnInit(){this._tableActiveUsersService.fetchData(),this.updateTimeRealTime()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}formatBytesAuto(t){return t>=1099511627776?(t/1099511627776).toFixed(2)+" TB":t>=1073741824?(t/1073741824).toFixed(2)+" GB":t>=1048576?(t/1048576).toFixed(2)+" MB":t>=1024?(t/1024).toFixed(2)+" KB":t+" B"}getFormattedDateTime(){const t=new Date,s=p=>p<10?"0"+p:p;return`${t.getFullYear()} - ${s(t.getMonth()+1)} - ${s(t.getDate())} ${s(t.getHours())}.${s(t.getMinutes())}.${s(t.getSeconds())}`}disconectedUser(t,s){this.fuseConfirmationService.open({title:"Confirmation Disconected",message:`Are you sure want disconected ${t}?`,actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this.disconect(s)})}disconect(t){var s=this;return(0,F.A)(function*(){"Active user has been removed."===(yield s._apiService.delete(`/api/delete-active-user-by-username/${t}`,!0)).message?(s._toast.success("Success Disconected User","Success"),s._tableActiveUsersService.fetchData()):s._toast.error("Failed Disconected User","Failed")})()}updateTimeRealTime(){setInterval(()=>{this.timeNow=this.getFormattedDateTime(),this.cdr.detectChanges()},100)}convertBytesToMB(t){return parseFloat(t)/1048576}applyFilter(t){t=t.trim().toLowerCase(),this.dataSource.filterPredicate=(s,o)=>s.user.toLowerCase().includes(o),this.dataSource.filter=t,this.setIsNotDataFound=0===this.dataSource.filteredData.length}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(b.G),e.rXU(C.G),e.rXU(y),e.rXU(e.gRc),e.rXU(u.tw))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-table-active-users"]],viewQuery:function(s,o){if(1&s&&(e.GBs(m.B4,5),e.GBs(d.iy,5)),2&s){let n;e.mGM(n=e.lsd())&&(o.sort=n.first),e.mGM(n=e.lsd())&&(o.paginator=n.first)}},decls:34,vars:9,consts:[["fuseCard",""],["paginator",""],["table",""],[1,"grid","grid-cols-2","gap-3"],[1,"flex","flex-col","px-8","py-6","pb-4","shadow-lg"],[1,"text-xl","font-bold"],[1,"mt-2"],[1,"font-medium"],[1,"flex","flex-col","px-8","py-6","pb-4","shadow-lg","bg-slate-800","text-white"],[1,"my-4"],[1,"flex","flex-col","shadow-md"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Active User",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-160 max-sm:min-w-280",3,"dataSource",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","../../../../../assets/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-160","max-sm:min-w-280",3,"dataSource"],["matColumnDef","user"],["mat-sort-header","profile_name",4,"matHeaderCellDef"],["class","py-4 font-medium",4,"matCellDef"],["matColumnDef","address"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","mac_address"],["matColumnDef","uptime"],["matColumnDef","bytes-in"],["matColumnDef","bytes-out"],["matColumnDef","action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header","profile_name"],[1,"py-4","font-medium"],["mat-sort-header",""],["mat-flat-button","",1,"bg-red-600","text-white",3,"click"]],template:function(s,o){if(1&s){const n=e.RV6();e.j41(0,"div",3)(1,"fuse-card",4,0)(3,"div",5),e.EFF(4,"Total Active User"),e.k0s(),e.j41(5,"div",6)(6,"p",7),e.EFF(7),e.k0s()()(),e.j41(8,"fuse-card",8,0)(10,"div",5),e.EFF(11,"Time Now"),e.k0s(),e.j41(12,"div",6)(13,"p",7),e.EFF(14),e.k0s()()()(),e.j41(15,"main",9)(16,"fuse-card",10,0)(18,"div",11),e.EFF(19," Active Users "),e.j41(20,"div",12)(21,"label",13),e.EFF(22,"Search"),e.k0s(),e.j41(23,"div",14)(24,"div",15),e.qSk(),e.j41(25,"svg",16),e.nrm(26,"path",17),e.k0s()(),e.joV(),e.j41(27,"input",18),e.bIt("keyup",function(f){return e.eBV(n),e.Njj(o.applyFilter(f.target.value))}),e.k0s()()()(),e.DNE(28,k,8,0,"div",19)(29,w,5,0,"div",20),e.j41(30,"div",21),e.DNE(31,K,27,4,"mat-table",22),e.k0s(),e.nrm(32,"mat-paginator",23,1),e.k0s()()}2&s&&(e.R7$(7),e.SpI("",o.totalUser," User"),e.R7$(7),e.JRh(o.timeNow),e.R7$(14),e.Y8G("ngIf",o.isLoading),e.R7$(),e.Y8G("ngIf",o.isNotDataFound&&!o.isLoading),e.R7$(2),e.Y8G("ngIf",!o.isLoading&&!o.isNotDataFound),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(8,S))("showFirstLastButtons",!0))},dependencies:[h.MD,h.bT,_.Hl,_.$z,d.Ou,d.iy,x.hM,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,A.m_,U.X1,g.fS,g.fg,m.NQ,m.B4,m.aE,T.$],encapsulation:2})}}return a})();var Z=r(49192);const O=()=>[".."],W=[{path:"",component:(()=>{class a{static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-active-users"]],decls:8,vars:2,consts:[[1,"w-full","h-fit","mb-10","flex","flex-col"],["aria-label","Breadcrumb",1,"flex","shadow","px-5","py-3","text-gray-700","borde","bg-white","dark:bg-slate-800"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","dark:text-gray-400","dark:hover:text-white",3,"routerLink"],[1,"w-full","p-4"]],template:function(s,o){1&s&&(e.j41(0,"main",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e.EFF(5," Active Users "),e.k0s()()()(),e.j41(6,"div",5),e.nrm(7,"app-table-active-users"),e.k0s()()),2&s&&(e.R7$(4),e.Y8G("routerLink",e.lJ4(1,O)))},dependencies:[z,Z.Wk],encapsulation:2})}}return a})()}]}}]);