"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2927],{31849:(F,v,a)=>{a.d(v,{$:()=>e});var u=a(14085),i=a(87122),r=a(54438);const h=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],_=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];function l(s,n){1&s&&(r.j41(0,"div",0),r.SdG(1),r.k0s(),r.j41(2,"div",1),r.SdG(3,1),r.k0s())}function b(s,n){1&s&&(r.j41(0,"div",2),r.SdG(1,3),r.k0s()),2&s&&r.Y8G("@expandCollapse",void 0)}function o(s,n){if(1&s&&(r.SdG(0,2),r.DNE(1,b,2,1,"div",2)),2&s){const f=r.XpG();r.R7$(),r.vxM(f.expanded?1:-1)}}let e=(()=>{class s{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(f){"expanded"in f&&(this.expanded=(0,u.he)(f.expanded.currentValue)),"flippable"in f&&(this.flippable=(0,u.he)(f.flippable.currentValue))}static{this.\u0275fac=function(p){return new(p||s)}}static{this.\u0275cmp=r.VBU({type:s,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(p,E){2&p&&r.HbH(E.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],features:[r.OA$],ngContentSelectors:_,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],[1,"fuse-card-expansion"]],template:function(p,E){1&p&&(r.NAR(h),r.DNE(0,l,4,0)(1,o,2,1)),2&p&&(r.vxM(E.flippable?0:-1),r.R7$(),r.vxM(E.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:i.X}})}}return s})()},2951:(F,v,a)=>{a.d(v,{I:()=>P});var u=a(10467),i=a(60177),r=a(89417),h=a(75351),_=a(30636),l=a(99213),b=a(59042),o=a(22080),e=a(54438),s=a(49192),n=a(3366),f=a(46601),p=a(45794),E=a(74157),D=a(33478);function m(g,y){if(1&g&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&g){const t=y.$implicit;e.Y8G("value",t.profile_name),e.R7$(),e.SpI(" ",t.profile_name," ")}}let P=(()=>{class g{constructor(t,d,c,x,w,A,I,U,C){this.fb=t,this.route=d,this._apiService=c,this.fuseConfirmationService=x,this._toast=w,this._tableUserService=A,this._tableVoucherService=I,this.dialogRef=U,this.data=C,this.roleDatas=[],this.isLoading=!1,"/dashboards/customer"===C.activateRoute?this.currentRoute="Account":"/dashboards/vouchers"===C.activateRoute&&(this.currentRoute="Voucher")}get detailDataUser(){return this._tableUserService.detailDataUser()}get disabledInput(){return this._tableUserService.disabledInput()}get isLoadingInput(){return this._tableUserService.isLoadingInput()}onNoClick(){this.dialogRef.close()}ngOnInit(){var t=this;return(0,u.A)(function*(){if(t.userFormEdit=t.fb.group({name:["",r.k0.required],profile:["",r.k0.required],status:["",r.k0.required]}),t.isLoadingInput||t.disabledInput?t.userFormEdit.disable():t.userFormEdit.enable(),t.detailDataUser)try{t.userData=t.detailDataUser;const d=yield t._apiService.get("/api/mikrotik/get-profile",!0);t.roleDatas=d.profiles,t.userFormEdit.patchValue({name:t.userData.name,profile:t.userData.profile,status:t.userData.disabled})}catch{t._toast.error("Error Fetch Data","Error")}})()}onSubmit(){var t=this;return(0,u.A)(function*(){try{if(t.isLoading=!0,t.userFormEdit.valid){const d=new FormData;d.append("name",t.userFormEdit.value.name),d.append("profile",t.userFormEdit.value.profile),d.append("disabled",t.userFormEdit.value.status);const c=yield t._apiService.post(`/api/mikrotik/hotspot-user/${t.userData.name}`,d);if(500===c.status)return void t._toast.error("Internal Server Error","Error");if(400===c.status)return void t._toast.error(`Failed Update ${t.currentRoute}`,"Error");if(404===c.status)return void t._toast.error(`Failed Update ${t.currentRoute}`,"Error");409===c.status&&t.fuseConfirmationService.open({title:"Notification",message:"The account already exists on the server. Would you like to create another account anyway?",icon:{color:"error"},actions:{confirm:{label:"Confirmation",color:"warn"}}}),"User berhasil diperbarui."===c.message&&(t.userFormEdit.reset(),t.userFormEdit.disable(),t._toast.success(`Success Update ${t.currentRoute}`,"Success"),t.isLoading=!1,t.onNoClick(),t._tableUserService.fetchData(),t._tableVoucherService.fetchData())}else t._toast.info("Please Fill in All Required Fields!","Error")}catch{t._toast.error("Failed to submit form","Error"),t.isLoading=!1}finally{t.isLoading=!1}})()}static{this.\u0275fac=function(d){return new(d||g)(e.rXU(r.ok),e.rXU(s.nX),e.rXU(n.G),e.rXU(f.G),e.rXU(p.tw),e.rXU(E.w),e.rXU(D.c),e.rXU(h.CP),e.rXU(h.Vh))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-form-edit"]],decls:24,vars:8,consts:[[1,"h-full","w-full"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","sm:flex-row","items-start","sm:items-center","w-full","justify-between"],[1,"mb-2","text-xl","font-semibold","sm:mb-0"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,"px-3","my-1"],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","px-8","py-4","pb-4",3,"formGroup"],["floatLabel","always",1,"w-full"],["matInput","","formControlName","name","type","text",3,"placeholder"],[1,"gt-xs:pr-3","flex-auto"],["matNativeControl","","formControlName","profile"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"bg-blue-600","text-white","p-2","rounded",3,"click"],[3,"value"]],template:function(d,c){1&d&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4),e.k0s()(),e.j41(5,"a",4),e.bIt("click",function(){return c.onNoClick()}),e.nrm(6,"mat-icon",5),e.k0s()(),e.nrm(7,"ion-loading",6),e.j41(8,"div",7)(9,"form",8)(10,"mat-form-field",9)(11,"mat-label"),e.EFF(12),e.k0s(),e.nrm(13,"input",10),e.k0s(),e.j41(14,"mat-form-field",11)(15,"mat-label"),e.EFF(16,"User Profiles"),e.k0s(),e.j41(17,"select",12)(18,"option",13),e.EFF(19," -----Select User Profiles----- "),e.k0s(),e.DNE(20,m,2,2,"option",14),e.k0s(),e.nrm(21,"mat-icon",15),e.k0s(),e.j41(22,"button",16),e.bIt("click",function(){return c.onSubmit()}),e.EFF(23),e.k0s()()()()),2&d&&(e.R7$(4),e.SpI("Edit ",c.currentRoute,""),e.R7$(3),e.Y8G("isOpen",c.isLoading),e.R7$(2),e.Y8G("formGroup",c.userFormEdit),e.R7$(3),e.SpI("Unique Id ",c.currentRoute,""),e.R7$(),e.Y8G("placeholder","NIK / Nomer HP"),e.R7$(7),e.Y8G("ngForOf",c.roleDatas),e.R7$(),e.Y8G("svgIcon","heroicons_solid:map-pin"),e.R7$(2),e.SpI(" Edit ",c.currentRoute," "))},dependencies:[_.RG,_.rl,_.nJ,_.JW,r.YN,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,b.fS,b.fg,r.X1,r.j4,r.JD,i.MD,i.Sq,l.m_,l.An,o.rQ],encapsulation:2})}}return g})()},74157:(F,v,a)=>{a.d(v,{w:()=>_});var u=a(10467),i=a(54438),r=a(3366),h=a(45794);let _=(()=>{class l{constructor(){this.hotspotUser=(0,i.vPA)([]),this.isLoading=(0,i.vPA)(!1),this.isNotFound=(0,i.vPA)(!1),this.disabledInput=(0,i.vPA)(!1),this.isLoadingInput=(0,i.vPA)(!1),this.detailDataUser=(0,i.vPA)(null),this._toastService=(0,i.WQX)(h.tw),this._apiService=(0,i.WQX)(r.G)}fetchData(){this.isLoading.set(!0),this._apiService.get("/api/mikrotik/get-data-users",!0).then(o=>{this.isLoading.set(!1),this.isNotFound.set(!1);const e=(o.users??[]).map(s=>({...s,profile:s.profile??"default"}));this.hotspotUser.set(e)}).catch(o=>{this.isLoading.set(!1),this.isNotFound.set(!0),this._toastService.error("Failed to fetch data","Error")})}fetchDataByName(o){var e=this;return(0,u.A)(function*(){e.isLoadingInput.set(!0),yield e._apiService.get(`/api/mikrotik/get-Hotspot-by-phone/${o}`,!0).then(function(){var s=(0,u.A)(function*(n){e.isLoadingInput.set(!1),e.detailDataUser.set(n.user)});return function(n){return s.apply(this,arguments)}}()).catch(function(){var s=(0,u.A)(function*(n){e.disabledInput.set(!1),e._toastService.error("Failed to fetch data","Error")});return function(n){return s.apply(this,arguments)}}())})()}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275prov=i.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},33478:(F,v,a)=>{a.d(v,{c:()=>_});var u=a(10467),i=a(54438),r=a(3366),h=a(45794);let _=(()=>{class l{constructor(){this.voucher=(0,i.vPA)([]),this.voucherPrint=(0,i.vPA)([]),this.isLoading=(0,i.vPA)(!1),this.isNotFound=(0,i.vPA)(!1),this.isLoadingPrint=(0,i.vPA)(!1),this._toastService=(0,i.WQX)(h.tw),this._apiService=(0,i.WQX)(r.G),this.disabledInput=(0,i.vPA)(!1),this.isLoadingInput=(0,i.vPA)(!1),this.detailDataUserProfile=(0,i.vPA)(null)}fetchData(){var o=this;return(0,u.A)(function*(){o.isLoading.set(!0),o._apiService.get("/api/mikrotik/list-voucher",!0).then(function(){var e=(0,u.A)(function*(s){o.isLoading.set(!1),o.isNotFound.set(!1),o.voucher.set(s),o.isNotFound.set(0===s.length)});return function(s){return e.apply(this,arguments)}}()).catch(function(){var e=(0,u.A)(function*(s){o.isLoading.set(!1),o.isNotFound.set(!0),o._toastService.error("Failed to fetch data","Error")});return function(s){return e.apply(this,arguments)}}())})()}printVoucher(o,e,s){var n=this;return(0,u.A)(function*(){n.isLoadingPrint.set(!0);const f=new Date(o),p=new Date(e);p.setHours(23,59,59,999);const D=n.voucher().filter(m=>{const P=new Date(m.created_at);return P>=f&&P<=p&&m.profile===s&&"Inactive"===m.status});if(n.voucherPrint.set(D),0===D.length)return n._toastService.warning("Voucher Not Found","Empty Data"),void n.isLoadingPrint.set(!1);n._toastService.success("Successfully printed the voucher","Success"),setTimeout(()=>{const m=document.getElementById("print-buttons");m&&m.click()},500),n.isLoadingPrint.set(!1)})()}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275prov=i.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()}}]);